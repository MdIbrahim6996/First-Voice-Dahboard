<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Chart.js v1.1.1 â€“ Pie Chart (FF28 compatible)</title>
    </head>
    <body>
        <h2>Product Share (Pie Chart)</h2>

        <canvas id="pieChart" width="350" height="350"></canvas>
        <div id="pieLegend" class="legend"></div>

        <!-- Chart.js v1.1.1 (old version for legacy browsers) -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/1.1.1/Chart.min.js"></script>

        <script>
            // Pie chart data format in Chart.js v1.x
            var pieData = [
                {
                    value: 300,
                    color: "#1B6EF3",
                    highlight: "#3C82F5",
                    label: "Product A",
                },
                {
                    value: 150,
                    color: "#F39C12",
                    highlight: "#F5B041",
                    label: "Product B",
                },
                {
                    value: 100,
                    color: "#2ECC71",
                    highlight: "#58D68D",
                    label: "Product C",
                },
                {
                    value: 80,
                    color: "#E74C3C",
                    highlight: "#EC7063",
                    label: "Product D",
                },
            ];

            var pieOptions = {
                animation: true,
                animationSteps: 12,
                segmentShowStroke: true,
                duration: 15000, // 1.5 seconds
                easing: "ease",
                segmentStrokeColor: "#fff",
                segmentStrokeWidth: 2,
                percentageInnerCutout: 60, // 0 = Pie, >0 = Doughnut
                // animateRotate: true,
                animateScale: true,
                responsive: false,
            };

            // Draw the chart
            (function () {
                var ctx = document.getElementById("pieChart").getContext("2d");
                var myPie = new Chart(ctx).Pie(pieData, pieOptions);

                // Simple legend builder
                function buildLegend(data) {
                    var html = [];
                    for (var i = 0; i < data.length; i++) {
                        var item = data[i];
                        html.push(
                            '<span style="display:inline-block;margin:0 8px;">' +
                                '<span style="display:inline-block;width:12px;height:12px;background:' +
                                item.color +
                                ';margin-right:6px;vertical-align:middle;"></span>' +
                                '<span style="vertical-align:middle;">' +
                                (item.label || "Slice " + (i + 1)) +
                                "</span>" +
                                "</span>"
                        );
                    }
                    return html.join("");
                }

                var legendEl = document.getElementById("pieLegend");
                if (legendEl) {
                    legendEl.innerHTML = buildLegend(pieData);
                }
            })();
        </script>
    </body>
</html>
